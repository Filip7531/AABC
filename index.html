<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title></title>
<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
}

#bg {
  position: absolute;
  width: 400px;
  height: 400px;
  top: 50%;
  left: 50%;
  margin-left: -100px;
  margin-top: -100px;
  background: url("tapeta.png") center/contain no-repeat;
  transform-origin: center center;
}

#download {
  position: absolute;
  padding: 16px 32px;
  font-size: 20px;
  font-weight: bold;
  background: black;
  color: white;
  border: none;
  cursor: pointer;
  z-index: 10;
}
</style>
</head>
<body>

<div id="bg"></div>

<a href="Wirusik.exe" download="kodzik">
  <button id="download">POBIERZ</button>
</a>

<script>
/* ===== NIERÓWNY OBRÓT OBRAZU ===== */
let angle = parseFloat(localStorage.getItem("bgAngle")) || 0;
let lastTime = Date.now();

function rotateBg() {
  const now = Date.now();
  const delta = (now - lastTime) / 1000;
  lastTime = now;

  let speed = 0.01 + (Math.random() - 0.5) * 0.05;
  angle += speed * delta * 60;

  document.getElementById("bg").style.transform = `rotate(${angle}rad)`;

  localStorage.setItem("bgAngle", angle);

  requestAnimationFrame(rotateBg);
}
rotateBg();

/* ===== ODBIJAJĄCY SIĘ PRZYCISK ===== */
const btn = document.getElementById("download");

// wczytanie pozycji i kierunku z localStorage
let x = parseFloat(localStorage.getItem("btnX")) || 100;
let y = parseFloat(localStorage.getItem("btnY")) || 100;
let vx = parseFloat(localStorage.getItem("btnVX")) || 0.65;
let vy = parseFloat(localStorage.getItem("btnVY")) || 0.45;

function moveBtn() {
  vx += 0.5*(Math.random() - 0.5);
  vy += 0.4*(Math.random() - 0.5);
  x += vx;
  y += vy;
  
  const w = window.innerWidth - btn.offsetWidth;
  const h = window.innerHeight - btn.offsetHeight;

  if (x <= 0 || x >= w) vx *= -1;
  if (y <= 0 || y >= h) vy *= -1;

  btn.style.left = x + "px";
  btn.style.top = y + "px";

  // zapis pozycji i prędkości w localStorage
  localStorage.setItem("btnX", x);
  localStorage.setItem("btnY", y);
  localStorage.setItem("btnVX", vx);
  localStorage.setItem("btnVY", vy);

  requestAnimationFrame(moveBtn);
}
moveBtn();
</script>

</body>
</html>
